amrex.fpe_trap_invalid = 1

fabarray.mfiter_tile_size = 1024 1024 1024

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#            SIMULATION STOP            #
#.......................................#
max_step                =  20            # Max number of time steps
max_step                =  1             # Max number of time steps
steady_state            =  0            # Steady-state solver? 

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#         TIME STEP COMPUTATION         #
#.......................................#
incflo.fixed_dt        =   0.020
#incflo.cfl            =   0.5

incflo.do_initial_proj      =   1
incflo.initial_iterations   =   1

incflo.init_shrink = 1.0

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#            INPUT AND OUTPUT           #
#.......................................#
amr.plot_int            =   1           # Steps between plot files
amr.plt_regtest         =   1

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#               PHYSICS                 #
#.......................................#
incflo.gravity          =   0.  0.  0.  # Gravitational force (3D)
incflo.ro_0             =   1.          # Reference density 

incflo.fluid_model      =   "newtonian" # Fluid model (rheology)
incflo.mu               =   0.0         # Dynamic viscosity coefficient
incflo.constant_density =   false       #

incflo.advect_momentum       = true
incflo.advection_type        = "MOL"
incflo.diffusion_type        =  0
incflo.redistribution_type   =  "StateRedist" 

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#        ADAPTIVE MESH REFINEMENT       #
#.......................................#
amr.n_cell              =   34 16 16    # Grid cells at coarsest AMRlevel
amr.max_level           =   0           # Max AMR level in hierarchy 
amr.max_grid_size_x     =   1024
amr.max_grid_size_y     =   1024
amr.max_grid_size_z     =   1024
amr.blocking_factor     =   2

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#              GEOMETRY                 #
#.......................................#
geometry.prob_lo        =   0.  0.  0.  # Lo corner coordinates
geometry.prob_hi        =   3.4 1.6 1.6 # Hi corner coordinates
geometry.is_periodic    =   0   1       # Periodicity x y z (0/1)

# Boundary conditions -- note xlo is covered
xlo.type                =   "nsw"

xhi.type                =  "mi"
xhi.velocity            =   -2.0  0.0  0.0
xhi.density             = 1.0

# Add box
incflo.geometry = "box"
box.internal_flow = true

#box.Lo =  0.95  -0.2  -0.2
box.Lo =  0.92   -0.2  -0.2
box.Hi =  100.0   1.8   1.8 

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#           INITIAL CONDITIONS          #
#.......................................#
incflo.ic_u             =  -2.0         #
incflo.ic_v             =   0.0         #
incflo.ic_w             =   0.0         #
incflo.ic_p             =   0.0         #

#¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨#
#              VERBOSITY                #
#.......................................#
incflo.verbose            =   1         # incflo itself
mac_proj.verbose          =   1         # MAC Projector
nodal_proj.verbose        =   1         # Nodal Projector

#.......................................#
#               EB FLOW                 #
#.......................................#
eb_flow.velocity        = -2.0 0.0 0.0

eb2.small_volfrac       = 1.0e-6
